---
description: Regras para criaÃ§Ã£o e gerenciamento de planejamentos de desenvolvimento
globs: .plan/**/*.md
alwaysApply: false
---

# Regras de Planejamento

## PropÃ³sito

Define o processo padrÃ£o para criar e gerenciar planejamentos de desenvolvimento, garantindo que todas as features sigam desenvolvimento incremental por etapas testÃ¡veis e bem definidas.

---

## 1. Estrutura de DiretÃ³rios e Arquivos

### 1.1. CriaÃ§Ã£o do Plano

**Antes de iniciar qualquer planejamento:**

1. Criar pasta do plano em `.plan/backlog/` usando o formato:

   ```
   .plan/backlog/YY-MM-DD-<Nome-Do-Plano>/
   ```

2. Criar arquivo `index.md` na pasta do plano com estrutura bÃ¡sica

**Formato de nome da pasta:**

- Prefixo de data: `YY-MM-DD` (ex: `25-12-19`)
- Nome do plano: kebab-case, descritivo (ex: `hero-search-feature`)
- Exemplo completo: `25-12-19-hero-search-feature`

### 1.2. Estrutura de Arquivos de Etapa

**Cada etapa deve ser um arquivo separado com formato:**

```
<numeroDaEtapa>-<nomeDaEtapa>.md
```

**Exemplos vÃ¡lidos:**

- `01-configuracao-base.md`
- `02-fixtures-helpers.md`

**Regras:**

- NumeraÃ§Ã£o com 2 dÃ­gitos (01, 02, 03...)
- Nome em kebab-case
- OrdenaÃ§Ã£o sequencial sem saltos

---

## 2. Processo de Planejamento

### 2.1. PrÃ©-requisitos

**Antes de criar o planejamento, vocÃª DEVE:**

1. Ler completamente todos os arquivos relevantes do projeto
2. Entender o contexto e dependÃªncias existentes
3. Verificar arquivos similares para manter padrÃ£o (ex: `.plan/cobertura-testes/`)

### 2.2. OrdenaÃ§Ã£o de Etapas

**Ordenar etapas seguindo esta prioridade:**

1. **Etapas sem dependÃªncias** â†’ Primeiro
2. **Etapas com menos dependÃªncias** â†’ Seguem
3. **Etapas dependentes** â†’ Por Ãºltimo, respeitando ordem lÃ³gica

**Identificar e documentar dependÃªncias explicitamente:**

- Listar quais etapas anteriores sÃ£o necessÃ¡rias
- Validar dependÃªncias antes de marcar etapa como "concluÃ­da"

### 2.3. Desenvolvimento Incremental

**Cada etapa deve ser:**

- **TestÃ¡vel**: Ter critÃ©rios claros de validaÃ§Ã£o
- **Isolada**: Quando possÃ­vel, funcionar independentemente
- **EspecÃ­fica**: Focar em um Ãºnico objetivo tÃ©cnico
- **VerificÃ¡vel**: Permitir validaÃ§Ã£o objetiva de conclusÃ£o

---

## 3. ConteÃºdo do Arquivo `index.md`

### 3.1. Estrutura ObrigatÃ³ria

```markdown
# <Nome do Plano>

## ğŸ“‹ VisÃ£o Geral

[DescriÃ§Ã£o breve do objetivo do plano]

## ğŸ¯ Estrutura de Etapas

### Etapa 1: <Nome>

**Arquivo**: `01-<nome>.md`
**Status**: â³ Pendente | ğŸ”„ Em desenvolvimento | âœ… ConcluÃ­da
**DependÃªncias**: [lista de etapas ou "nenhuma"]

[... outras etapas ...]

## ğŸ“Š Progresso Geral

[Status consolidado do plano]
```

### 3.2. Status das Etapas

**Usar exatamente estes valores:**

- `â³ Pendente` - Ainda nÃ£o iniciada
- `ğŸ”„ Em desenvolvimento` - Atualmente sendo trabalhada
- `âœ… ConcluÃ­da` - Finalizada e validada

**Atualizar status:**

- Marcar como "ğŸ”„ Em desenvolvimento" ao iniciar
- Marcar como "âœ… ConcluÃ­da" apÃ³s validaÃ§Ã£o completa
- Registrar data/hora da mudanÃ§a quando relevante

---

## 4. ConteÃºdo de Cada Arquivo de Etapa

### 4.1. SeÃ§Ãµes ObrigatÃ³rias

**Todas as etapas DEVEM conter:**

1. **Objetivo** - O que serÃ¡ implementado nesta etapa
2. **Entregas** - Checklist especÃ­fico e verificÃ¡vel
3. **Arquivos Afetados** - Lista de arquivos/packages que serÃ£o modificados
4. **ImplementaÃ§Ã£o** - Detalhes tÃ©cnicos especÃ­ficos (cÃ³digo, configuraÃ§Ãµes)
5. **CritÃ©rios de ValidaÃ§Ã£o** - Como verificar que a etapa estÃ¡ completa
6. **DependÃªncias** - Etapas anteriores necessÃ¡rias

### 4.2. Template MÃ­nimo

```markdown
# Etapa X: <Nome da Etapa>

## ğŸ“‹ Objetivo

[DescriÃ§Ã£o clara e especÃ­fica do que serÃ¡ implementado]

## ğŸ¯ Entregas

- [ ] Item de entrega 1 (especÃ­fico e verificÃ¡vel)
- [ ] Item de entrega 2
- [ ] Item de entrega 3

## ğŸ“¦ Arquivos Afetados

### Package/Arquivo 1

- `caminho/para/arquivo.ts` - [descriÃ§Ã£o da mudanÃ§a]
- `caminho/para/arquivo2.ts` - [descriÃ§Ã£o da mudanÃ§a]

## ğŸ”§ ImplementaÃ§Ã£o

[Detalhes tÃ©cnicos especÃ­ficos com exemplos de cÃ³digo quando necessÃ¡rio]

## âœ… CritÃ©rios de ValidaÃ§Ã£o

- [ ] Teste especÃ­fico passa
- [ ] Funcionalidade X funciona conforme especificado
- [ ] Nenhum teste existente quebrou

## ğŸ”— DependÃªncias

- Etapa Y: [nome] - [por que Ã© necessÃ¡ria]
```

### 4.3. CritÃ©rios de Qualidade do Planejamento

**O planejamento deve ser:**

- **Detalhado**: Incluir cÃ³digo especÃ­fico quando relevante
- **Sucinto**: NÃ£o incluir informaÃ§Ãµes desnecessÃ¡rias
- **Objetivo**: Focar apenas no que serÃ¡ implementado
- **TÃ©cnico**: Usar termos precisos e especÃ­ficos do domÃ­nio

**Evitar:**

- âŒ DescriÃ§Ãµes vagas como "implementar funcionalidade X"
- âŒ Planos genÃ©ricos sem especificidades
- âŒ MÃºltiplos objetivos em uma Ãºnica etapa

**Preferir:**

- âœ… "Criar funÃ§Ã£o `validateHeroData()` em `src/utils/validation.ts`"
- âœ… "Configurar Vitest em `packages/database/vitest.config.ts`"
- âœ… Objetivos Ãºnicos e especÃ­ficos por etapa

---

## 5. Checklist de ConclusÃ£o de Etapa

### 5.1. Antes de Marcar como ConcluÃ­da

**Validar TODOS os itens:**

- [ ] Todas as entregas da etapa foram implementadas
- [ ] Testes unitÃ¡rios criados para funcionalidades implementadas (quando aplicÃ¡vel)
- [ ] Testes relacionados passam (se aplicÃ¡vel)
- [ ] Nenhum teste existente foi quebrado
- [ ] CÃ³digo segue padrÃµes do projeto (clean code, validaÃ§Ãµes)
- [ ] DependÃªncias de outras etapas foram verificadas
- [ ] Commit realizado com mensagem descritiva

### 5.2. ApÃ³s ValidaÃ§Ã£o

1. Marcar todas as entregas como concluÃ­das `[x]`
2. Atualizar status no `index.md` para `âœ… ConcluÃ­da`
3. Registrar resumo da implementaÃ§Ã£o (opcional mas recomendado)
4. **Fazer commit das mudanÃ§as** com mensagem descritiva

**Exemplo de atualizaÃ§Ã£o no index.md:**

```markdown
### Etapa 1: ConfiguraÃ§Ã£o Base

**Arquivo**: `01-configuracao-base.md`
**Status**: âœ… ConcluÃ­da
**DependÃªncias**: nenhuma
**ConcluÃ­da em**: 2024-12-19 - Vitest configurado em todos os packages
```

### 5.3. Commit ao Final do Desenvolvimento

**Ao concluir TODAS as etapas de um plano:**

1. Verificar que todas as etapas estÃ£o marcadas como `âœ… ConcluÃ­da`
2. Executar todos os testes do projeto para garantir que nada quebrou
3. Fazer commit final com mensagem descritiva do plano completo
4. Mover o plano de `.plan/backlog/` para `.plan/done/` (se aplicÃ¡vel)

**Formato sugerido de mensagem de commit:**

```
feat: [nome-do-plano] - descriÃ§Ã£o breve

- Etapa 1: [resumo]
- Etapa 2: [resumo]
- Etapa 3: [resumo]
```

**Exemplo:**

```
feat: hero-search-feature - implementaÃ§Ã£o completa

- Etapa 1: ConfiguraÃ§Ã£o base do Vitest
- Etapa 2: CriaÃ§Ã£o de fixtures e helpers
- Etapa 3: ImplementaÃ§Ã£o da busca de herÃ³is
```

---

## 6. Pontos de Melhoria e DecisÃµes Pendentes

### 6.1. Quando Incluir

Adicionar seÃ§Ã£o "Pontos de Melhoria" no final do arquivo quando:

- Existem decisÃµes arquiteturais que precisam ser tomadas
- HÃ¡ ambiguidades tÃ©cnicas que podem afetar implementaÃ§Ã£o
- MÃºltiplas abordagens sÃ£o possÃ­veis e precisam de decisÃ£o

### 6.2. Formato PadrÃ£o

```markdown
## â“ Pontos de Melhoria

### Pergunta 1: [TÃ­tulo da decisÃ£o]

**Contexto**: [ExplicaÃ§Ã£o nÃ£o tÃ©cnica do problema]

**DecisÃ£o**: Escolha uma opÃ§Ã£o:

**A)** [OpÃ§Ã£o A]

- âœ… PrÃ³s: [lista]
- âŒ Contras: [lista]
- ğŸ¯ Quando usar: [situaÃ§Ã£o]

**B)** [OpÃ§Ã£o B]

- âœ… PrÃ³s: [lista]
- âŒ Contras: [lista]
- ğŸ¯ Quando usar: [situaÃ§Ã£o]

**RecomendaÃ§Ã£o**: [OpÃ§Ã£o] - [Justificativa]
```

---

## 7. IntegraÃ§Ã£o com TDD

### 7.1. Planejamento de Testes

**Cada etapa que implementa funcionalidade DEVE incluir:**

1. **EstratÃ©gia de testes** - O que serÃ¡ testado
2. **Testes unitÃ¡rios** - Para funÃ§Ãµes/componentes isolados
3. **Testes de integraÃ§Ã£o** - Para fluxos completos (quando aplicÃ¡vel)

**Exemplo na seÃ§Ã£o de entregas:**

```markdown
## ğŸ¯ Entregas

- [ ] Implementar funÃ§Ã£o `validateHeroData()`
- [ ] Criar testes unitÃ¡rios para `validateHeroData()`
- [ ] Validar cobertura de testes >= 80%
```

### 7.2. ValidaÃ§Ã£o de Testes

**Antes de marcar etapa como concluÃ­da:**

- Executar todos os testes relacionados
- Verificar cobertura de cÃ³digo quando aplicÃ¡vel
- Garantir que todos os testes passam

---

## 8. ReferÃªncias e Exemplos

### 8.1. Exemplos de Boas PrÃ¡ticas

**ReferÃªncia:**

- `.plan/cobertura-testes/index.md` - Estrutura de plano completo
- `.plan/cobertura-testes/01-configuracao-base.md` - Exemplo de etapa bem estruturada

### 8.2. PadrÃµes do Projeto

**Alinhar com:**

- Regras de desenvolvimento: `.cursor/rules/03-Desenvolvimento.mdc`
- Regras de testes: `.cursor/rules/rules/04-testagem.mdc`
- Regras universais: `.cursor/rules/00-universais.mdc`

---

## âœ… Checklist de ValidaÃ§Ã£o do Plano

**Antes de iniciar implementaÃ§Ã£o, validar:**

- [ ] Pasta do plano criada com formato correto
- [ ] `index.md` criado com todas as etapas listadas
- [ ] Etapas ordenadas por dependÃªncias
- [ ] Cada etapa tem arquivo separado
- [ ] Cada arquivo de etapa contÃ©m todas as seÃ§Ãµes obrigatÃ³rias
- [ ] Entregas sÃ£o especÃ­ficas e verificÃ¡veis
- [ ] DependÃªncias entre etapas estÃ£o documentadas
- [ ] Testes estÃ£o planejados para cada etapa de funcionalidade

**Ao finalizar o plano completo:**

- [ ] Todas as etapas marcadas como concluÃ­das
- [ ] Testes unitÃ¡rios criados para todas as funcionalidades implementadas
- [ ] Todos os testes do projeto passando
- [ ] Commit final realizado com mensagem descritiva
- [ ] Plano movido para `.plan/done/` (se aplicÃ¡vel)

### Area "Pontos de melhoria:"

- insira no fim do arquivo perguntas multipla escolha de coisas que nao ficaram claras e que podem afetar a implementaÃ§Ã£o ou o funcionamento da aplicaÃ§Ã£o
